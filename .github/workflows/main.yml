name: Sanity_CICD

on:
  push:
    branches:
    - master
jobs:
  sanit_build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2.0.0
      - name: Install Packages 
        run: |
         sudo apt update
         sudo apt install nodejs
         sudo npm install -g @sanity/cli  
     
      
      - name: login
        run: |
           sudo mkdir /home/runner/.config/sanity
           sudo cp -rvf config.json /home/runner/.config/sanity/
       
     # - name: Sanity check 
     #   run: sudo sanity check
        
      - name: Sanity build 
        run: | 
         sudo chmod 777 -R ${GITHUB_WORKSPACE}
         sudo sanity build
         sudo env
       
      - name: sanity login and deployment
        run: |
         # echo -e  "\U+02C5" | sudo sanity login 
          echo `cat sanity.json  | jq -r .api.projectId` | sudo sanity deploy 
     
 
     
         
   
  
    
